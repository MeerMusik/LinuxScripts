#!/usr/bin/bash
# SPDX-License-Identifier: Unlicense OR CC0-1.0
# Copyright Â© 2021 Oliver Niebuhr, https://github.com/MeerMusik/LinuxScripts / https://oliverniebuhr.de / https://twitter.com/MeerMusik
# - CC0 1.0 Universal License Text Start -
# LinuxScripts
# Written in 2021 by Oliver Niebuhr, email: gitrepos@oliverniebuhr.de / Website: https://oliverniebuhr.de / Twitter: https://twitter.com/MeerMusik
# To the extent possible under law, the author(s) have dedicated all copyright and related and neighboring rights to this software to the public domain worldwide. This software is distributed without any warranty.
# You should have received a copy of the CC0 Public Domain Dedication along with this software. If not, see <http://creativecommons.org/publicdomain/zero/1.0/>
# - CC0 1.0 Universal License Text End -
# Hint: 1: -DwxUSE_DEBUG_NEW_ALWAYS=1 lead to build Errors. Not sure if this is broken on Linux in general or if other or additional Compiler Flags are necessary.
if [ ! -d $HOME/Dev/ ]; then mkdir $HOME/Dev/
fi
if [ ! -d $HOME/Dev/Builds/ ]; then mkdir $HOME/Dev/Builds/
fi
if [ -d $HOME/Dev/Builds/wxWidgetsx64/ ]; then rm --interactive=never --dir --recursive --force --verbose $HOME/Dev/Builds/wxWidgetsx64/*.* $HOME/Dev/Builds/wxWidgetsx64/* $HOME/Dev/Builds/wxWidgetsx64/
fi
if [ ! -d $HOME/Dev/Builds/wxWidgetsx64/ ]; then mkdir $HOME/Dev/Builds/wxWidgetsx64/
fi
cd $HOME/Dev/Builds/wxWidgetsx64/
cmake -G'Ninja' $HOME/Dev/GitRepos/wxWidgets/ $HOME/Dev/Builds/wxWidgetsx64/ -DCMAKE_VERBOSE_MAKEFILE=ON -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -DCOTIRE_VERBOSE=ON -DCMAKE_C_FLAGS='-D_FORTIFY_SOURCE=2 -D_GLIBCXX_ASSERTIONS -fasynchronous-unwind-tables -fcf-protection=branch -fexceptions -finput-charset=utf-8 -fno-lto -fno-omit-frame-pointer -fPIC -fstack-protector-all -fstack-clash-protection -ftrapv -frecord-gcc-switches -grecord-gcc-switches -m64 -mfunction-return=thunk -mindirect-branch=thunk -mindirect-branch-register -pthread -Og -ggdb3 -pie -pipe -std=c2x -Wall -Walloc-zero -Wcast-align -Wconversion -Wdeprecated-declarations -Wdouble-promotion -Wduplicated-branches -Wduplicated-cond -Wextra -Wformat=2 -Wformat-nonliteral -Wformat-overflow=2 -Wformat-security -Wformat-truncation -Wimplicit-fallthrough -Wlogical-op -Wmisleading-indentation -Wmissing-declarations -Wnonnull -Wnull-dereference -Wpedantic -Wpointer-arith -Wshadow -Wsign-conversion -Wstack-protector -Wstrict-overflow -Wtrampolines -Wunused -Wvla -Wl,-Og -Wl,--allow-multiple-definition -Wl,--build-id=sha1 -Wl,--discard-locals -Wl,-fno-lto -Wl,-g -Wl,--hash-style=gnu -Wl,-melf_x86_64 -Wl,-z,defs -Wl,-z,relro -Wl,-z,now -Wl,-z,noexecstack -Wl,-rpath=$$ORIGIN/../lib' -DCMAKE_CXX_FLAGS='-D_FORTIFY_SOURCE=2 -D_GLIBCXX_ASSERTIONS -fasynchronous-unwind-tables -fcf-protection=branch -fexceptions -finput-charset=utf-8 -fno-lto -fno-omit-frame-pointer -fPIC -fstack-protector-all -fstack-clash-protection -ftrapv -frecord-gcc-switches -grecord-gcc-switches -m64 -mfunction-return=thunk -mindirect-branch=thunk -mindirect-branch-register -pthread -Og -ggdb3 -pie -pipe -std=c++20 -Wall -Walloc-zero -Wcast-align -Wclass-memaccess -Wconversion -Wdeprecated-declarations -Wdouble-promotion -Wduplicated-branches -Wduplicated-cond -Wextra -Wformat=2 -Wformat-nonliteral -Wformat-overflow=2 -Wformat-security -Wformat-truncation -Wimplicit-fallthrough -Wlogical-op -Wmisleading-indentation -Wmissing-declarations -Wnonnull -Wnon-virtual-dtor -Wnull-dereference -Wold-style-cast -Woverloaded-virtual -Wpedantic -Wpointer-arith -Wreorder -Wshadow -Wsign-conversion -Wstack-protector -Wstrict-overflow -Wtrampolines -Wunused -Wuseless-cast -Wvla -Wl,-Og -Wl,--allow-multiple-definition -Wl,--build-id=sha1 -Wl,--discard-locals -Wl,-fno-lto -Wl,-g -Wl,--hash-style=gnu -Wl,-melf_x86_64 -Wl,-z,defs -Wl,-z,relro -Wl,-z,now -Wl,-z,noexecstack -Wl,-rpath=$$ORIGIN/../lib' -DwxBUILD_CXX_STANDARD=20 -DCMAKE_CXX_STANDARD_REQUIRED=ON -DCMAKE_CXX_EXTENSIONS=OFF -DwxBUILD_COMPATIBILITY=3.1 -DCMAKE_BUILD_TYPE=Debug -DwxBUILD_DEBUG_LEVEL=2 -DwxUSE_MEMORY_TRACING=1 -DwxUSE_GLOBAL_MEMORY_OPERATORS=1 -DwxUSE_DEBUG_CONTEXT=1 -DwxUSE_MEMORY_TRACING=1 -DwxUSE_GLOBAL_MEMORY_OPERATORS=1 -DwxUSE_DEBUG_NEW_ALWAYS=0 -DwxBUILD_DEMOS=OFF -DwxBUILD_INSTALL=ON -DwxBUILD_MONOLITHIC=OFF -DwxBUILD_OPTIMISE=OFF -DwxBUILD_PIC=ON -DwxBUILD_PRECOMP=ON -DwxBUILD_SAMPLES=OFF -DwxBUILD_SHARED=ON -DwxUSE_REPRODUCIBLE_BUILD=OFF -DwxBUILD_TESTS=OFF -DwxBUILD_TOOLKIT=gtk3 -DwxUSE_WEBKIT=OFF -DwxUSE_WEBVIEW=OFF -DwxBUILD_USE_STATIC_RUNTIME=OFF -DwxUSE_EXCEPTIONS=1 -DCMAKE_INSTALL_PREFIX=$HOME/Dev/Binaries/wxWidgetsx64Debug/
ninja --verbose -j$(nproc) -l$(nproc) -k1 1>~/Dev/wxWidgetsx64DebugLog.log 2>&1
ninja --verbose -j$(nproc) install
ninja --verbose -j1 clean
rm --interactive=never --force --verbose $HOME/Dev/Builds/wxWidgetsx64/CMakeCache.txt
cmake -G'Ninja' $HOME/Dev/GitRepos/wxWidgets/ $HOME/Dev/Builds/wxWidgetsx64/ -DCMAKE_VERBOSE_MAKEFILE=ON -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -DCOTIRE_VERBOSE=ON  -DCMAKE_C_FLAGS='-D_FORTIFY_SOURCE=2 -D_GLIBCXX_ASSERTIONS -fasynchronous-unwind-tables -fcf-protection=branch -fdata-sections -fexceptions -ffunction-sections -finput-charset=utf-8 -fno-lto -fno-omit-frame-pointer -fPIC -fstack-protector-all -fstack-clash-protection -ftrapv -frecord-gcc-switches -grecord-gcc-switches -m64 -mfunction-return=thunk -mindirect-branch=thunk -mindirect-branch-register -pthread -O3 -ggdb1 -pie -pipe -std=c2x -Wall -Walloc-zero -Wcast-align -Wconversion -Wdeprecated-declarations -Wdouble-promotion -Wduplicated-branches -Wduplicated-cond -Wextra -Wformat=2 -Wformat-nonliteral -Wformat-overflow=2 -Wformat-security -Wformat-truncation -Wimplicit-fallthrough -Wlogical-op -Wmisleading-indentation -Wmissing-declarations -Wnonnull -Wnull-dereference -Wpedantic -Wpointer-arith -Wshadow -Wsign-conversion -Wstack-protector -Wstrict-overflow -Wtrampolines -Wunused -Wvla -Wl,-O3 -Wl,--allow-multiple-definition -Wl,--build-id=sha1 -Wl,--discard-locals -Wl,-fno-lto -Wl,-g -Wl,--hash-style=gnu -Wl,--gc-sections -Wl,-melf_x86_64 -Wl,-z,defs -Wl,-z,relro -Wl,-z,now -Wl,-z,noexecstack -Wl,-rpath=$$ORIGIN/../lib' -DCMAKE_CXX_FLAGS='-D_FORTIFY_SOURCE=2 -D_GLIBCXX_ASSERTIONS -fasynchronous-unwind-tables -fcf-protection=branch -fdata-sections -fexceptions -ffunction-sections -finput-charset=utf-8 -fno-lto -fno-omit-frame-pointer -fPIC -fstack-protector-all -fstack-clash-protection -ftrapv -frecord-gcc-switches -grecord-gcc-switches -m64 -mfunction-return=thunk -mindirect-branch=thunk -mindirect-branch-register -pthread -O3 -ggdb1 -pie -pipe -std=c++20 -Wall -Walloc-zero -Wcast-align -Wclass-memaccess -Wconversion -Wdeprecated-declarations -Wdouble-promotion -Wduplicated-branches -Wduplicated-cond -Wextra -Wformat=2 -Wformat-nonliteral -Wformat-overflow=2 -Wformat-security -Wformat-truncation -Wimplicit-fallthrough -Wlogical-op -Wmisleading-indentation -Wmissing-declarations -Wnonnull -Wnon-virtual-dtor -Wnull-dereference -Wold-style-cast -Woverloaded-virtual -Wpedantic -Wpointer-arith -Wreorder -Wshadow -Wsign-conversion -Wstack-protector -Wstrict-overflow -Wtrampolines -Wunused -Wuseless-cast -Wvla -Wl,-O3 -Wl,--allow-multiple-definition -Wl,--build-id=sha1 -Wl,--discard-locals -Wl,-fno-lto -Wl,-g -Wl,--hash-style=gnu -Wl,--gc-sections -Wl,-melf_x86_64 -Wl,-z,defs -Wl,-z,relro -Wl,-z,now -Wl,-z,noexecstack -Wl,-rpath=$$ORIGIN/../lib' -DwxBUILD_CXX_STANDARD=20 -DCMAKE_CXX_STANDARD_REQUIRED=ON -DCMAKE_CXX_EXTENSIONS=OFF -DwxBUILD_COMPATIBILITY=3.1 -DCMAKE_BUILD_TYPE=Release -DwxBUILD_DEBUG_LEVEL=1 -DwxUSE_MEMORY_TRACING=1 -DwxUSE_GLOBAL_MEMORY_OPERATORS=1 -DwxUSE_DEBUG_CONTEXT=1 -DwxUSE_MEMORY_TRACING=1 -DwxUSE_GLOBAL_MEMORY_OPERATORS=1 -DwxUSE_DEBUG_NEW_ALWAYS=0 -DwxBUILD_DEMOS=OFF -DwxBUILD_INSTALL=ON -DwxBUILD_MONOLITHIC=OFF -DwxBUILD_OPTIMISE=OFF -DwxBUILD_PIC=ON -DwxBUILD_PRECOMP=ON -DwxBUILD_SAMPLES=OFF -DwxBUILD_SHARED=ON -DwxUSE_REPRODUCIBLE_BUILD=OFF -DwxBUILD_TESTS=OFF -DwxBUILD_TOOLKIT=gtk3 -DwxUSE_WEBKIT=OFF -DwxUSE_WEBVIEW=OFF -DwxBUILD_USE_STATIC_RUNTIME=OFF -DwxUSE_EXCEPTIONS=1 -DCMAKE_INSTALL_PREFIX=$HOME/Dev/Binaries/wxWidgetsx64Release/
ninja --verbose -j$(nproc) -l$(nproc) -k1 1>~/Dev/wxWidgetsx64ReleaseLog.log 2>&1
ninja --verbose -j$(nproc) install
echo Script paused for 10 Seconds to be able to read the Build or Test Results! Please wait a Moment...
sleep 10s
rm --interactive=never --dir --recursive --force --verbose $HOME/Dev/Builds/wxWidgetsx64/*.* $HOME/Dev/Builds/wxWidgetsx64/* $HOME/Dev/Builds/wxWidgetsx64/
echo DONE!
exit
